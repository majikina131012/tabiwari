class Public::ExpensesController < ApplicationController
  def create
    expense = Expense.new(expense_params)
    expense.group_id = params[:group_id]
    if expense.save

      params[:user_ids].each do |user_id|
        Share.create(expense_id: expense.id, user_id: user_id)
      end

      redirect_to request.referer
    else
      render root_path
    end
  end

  private
  def expense_params
    params.require(:expense).permit(:amount, :description, :payer_id, :group_id, :user_ids)
  end
end
